var saveAs=saveAs||function(b){var k=b.document,x=b.URL||b.webkitURL||b,n=k.createElementNS("http://www.w3.org/1999/xhtml","a"),y="download"in n,z=function(a){var e=k.createEvent("MouseEvents");e.initMouseEvent("click",!0,!1,b,0,0,0,0,0,!1,!1,!1,!1,0,null);return a.dispatchEvent(e)},s=b.webkitRequestFileSystem,t=b.requestFileSystem||s||b.mozRequestFileSystem,A=function(a){(b.setImmediate||b.setTimeout)(function(){throw a;},0)},p=0,l=[],q=function(a,e,d){e=[].concat(e);for(var b=e.length;b--;){var c=
a["on"+e[b]];if("function"===typeof c)try{c.call(a,d||a)}catch(f){A(f)}}},m=function(a,e){var d=this,c=a.type,k=!1,f,r,m=function(a){a=(b.URL||b.webkitURL||b).createObjectURL(a);l.push(a);return a},u=function(){q(d,["writestart","progress","write","writeend"])},g=function(){if(k||!f)f=m(a);r.location.href=f;d.readyState=d.DONE;u()},h=function(a){return function(){if(d.readyState!==d.DONE)return a.apply(this,arguments)}},v={create:!0,exclusive:!1},w;d.readyState=d.INIT;e||(e="download");if(y&&(f=m(a),
n.href=f,n.download=e,z(n))){d.readyState=d.DONE;u();return}b.chrome&&c&&"application/octet-stream"!==c&&(w=a.slice||a.webkitSlice,a=w.call(a,0,a.size,"application/octet-stream"),k=!0);r="application/octet-stream"===c||s?b:b.open();t?(p+=a.size,t(b.TEMPORARY,p,h(function(b){b.root.getDirectory("saved",v,h(function(b){var c=function(){b.getFile(e,v,h(function(b){b.createWriter(h(function(c){c.onwriteend=function(a){r.location.href=b.toURL();l.push(b);d.readyState=d.DONE;q(d,"writeend",a)};c.onerror=
function(){var a=c.error;a.code!==a.ABORT_ERR&&g()};["writestart","progress","write","abort"].forEach(function(a){c["on"+a]=d["on"+a]});c.write(a);d.abort=function(){c.abort();d.readyState=d.DONE};d.readyState=d.WRITING}),g)}),g)};b.getFile(e,{create:!1},h(function(a){a.remove();c()}),h(function(a){a.code===a.NOT_FOUND_ERR?c():g()}))}),g)}),g)):g()},c=m.prototype;c.abort=function(){this.readyState=this.DONE;q(this,"abort")};c.readyState=c.INIT=0;c.WRITING=1;c.DONE=2;c.error=c.onwritestart=c.onprogress=
c.onwrite=c.onabort=c.onerror=c.onwriteend=null;b.addEventListener("unload",function(){for(var a=l.length;a--;){var b=l[a];"string"===typeof b?x.revokeObjectURL(b):b.remove()}l.length=0},!1);return function(a,b){return new m(a,b)}}(self);
